import{html,render}from"../../../../lib/lit-extended.js";import{repeat}from"../../../../lib/repeat.js";class ZcuiWcDateTimePicker extends HTMLElement{static get observedAttributes(){return["max-date-time","min-date-time"]}constructor(){super(),this.selectedMonth=4,this.selectedYear=2018,this.openMonthList=!1,this.openYearList=!1,this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.monthRangeVal=[0,1,2,3,4,5,6,7,8,9,10,11],this.yearRangeVal=[2018],this.updateShadowDom=this.updateShadowDom.bind(this),this.toggleOpenMonthList=this.toggleOpenMonthList.bind(this),this.toggleOpenYearList=this.toggleOpenYearList.bind(this)}get htmlTemplate(){return html`
      <style>
        .zcui-wc-date-time-picker{padding:20px;border:solid 1px #cecece;box-shadow:5px 5px 50px 2px #cecece;border-radius:5px;height:200px;margin:auto;width:fit-content}.zcui-wc-date-time-picker .d-f{display:flex}.zcui-wc-date-time-picker .flip-month-page{align-items:center;justify-content:space-around}.zcui-wc-date-time-picker .flip-month-page .left-arrow{border-left:solid 1.5px #6b46bc;border-bottom:solid 1.5px #6b46bc;margin-right:10px}.zcui-wc-date-time-picker .flip-month-page .right-arrow{border-right:solid 1.5px #6b46bc;border-top:solid 1.5px #6b46bc;margin-left:10px}.zcui-wc-date-time-picker .flip-month-page .arrow{height:12px;width:12px;transform:rotate(45deg)}.zcui-wc-date-time-picker .flip-month-page .change-month,.zcui-wc-date-time-picker .flip-month-page .change-year{position:relative;cursor:pointer;border:solid 2px #e5e8e9bf;border-radius:5px;padding:5px 10px;margin:0 7px}.zcui-wc-date-time-picker .flip-month-page .change-month .down-arrow,.zcui-wc-date-time-picker .flip-month-page .change-year .down-arrow{margin-top:2px;height:8px;width:8px;transform:rotate(45deg);border-right:solid 1.5px #6b46bc;border-bottom:solid 1.5px #6b46bc;margin-left:10px}.zcui-wc-date-time-picker .flip-month-page .change-month .month-list,.zcui-wc-date-time-picker .flip-month-page .change-month .year-list,.zcui-wc-date-time-picker .flip-month-page .change-year .month-list,.zcui-wc-date-time-picker .flip-month-page .change-year .year-list{display:flex;flex-direction:column;align-items:center;position:absolute;top:29px;left:0;height:100px;right:0;border:solid 1px #e5e8e9bf;border-top:none;overflow:scroll;padding-top:5px}.zcui-wc-date-time-picker .flip-month-page .change-month .month-list span,.zcui-wc-date-time-picker .flip-month-page .change-month .year-list span,.zcui-wc-date-time-picker .flip-month-page .change-year .month-list span,.zcui-wc-date-time-picker .flip-month-page .change-year .year-list span{box-sizing:border-box;padding:5px 10px;width:100%;text-align:left}.zcui-wc-date-time-picker .flip-month-page .change-month .month-list span:hover,.zcui-wc-date-time-picker .flip-month-page .change-month .year-list span:hover,.zcui-wc-date-time-picker .flip-month-page .change-year .month-list span:hover,.zcui-wc-date-time-picker .flip-month-page .change-year .year-list span:hover{background:#6b46bc;color:#fff}.zcui-wc-date-time-picker .flip-month-page .change-month .month,.zcui-wc-date-time-picker .flip-month-page .change-year .month{width:70px}.zcui-wc-date-time-picker .hide{display:none}

      </style>
      <script>
function onClick(e) {
  return function(month) {
    this.selectMonth(month);
  }
}
</script>
<div class="zcui-wc-date-time-picker d-f">
  <div class="flip-month-page d-f">
    <span class="arrow left-arrow"></span>
    <span class="change-month d-f">
      <div class="d-f" on-click=${this.toggleOpenMonthList}>
        <span class="month name">${this.monthNames[this.selectedMonth]}</span>
        <div class="down-arrow"></div>
      </div>
      <div
        class$="${this.openMonthList?"month-list":"hide"}">
        ${repeat(this.monthRangeVal,e=>html`
          <span on-click=${this.selectMonth(e)}>${this.monthNames[e]}</span>
        `)}
      </div>
    </span>
    <span class="change-year d-f">
      <div class="d-f" on-click=${this.toggleOpenYearList}>
        <span class="year-name">${this.selectedYear}</span>
        <div class="down-arrow"></div>
      </div>
      <div class$="${this.openYearList?"year-list":"hide"}">
        ${repeat(this.yearRangeVal,e=>html`
        <span on-click=${this.selectYear(e)}>${e}</span>
        `)}
      </div>
    </span>
    <span class="calendar">
      <div></div>
    </span>
    <span class="arrow right-arrow"></span>
  </div>
</div>
    `}createShadowDom(){this.attachShadow({mode:"open"}),this.updateShadowDom()}updateShadowDom(){this.shadowRoot&&render(this.htmlTemplate,this.shadowRoot)}attributeChangedCallback(e,t,i){t!=i&&(this.setProps(),this.updateShadowDom())}setProps(){this.maxDateTime=new Date(this.getAttribute("max-date-time")),this.minDateTime=new Date(this.getAttribute("min-date-time")),this._updateCalendarRange()}connectedCallback(){this.createShadowDom()}toggleOpenMonthList(){this.openMonthList=!this.openMonthList,this.updateShadowDom()}toggleOpenYearList(){this.openYearList=!this.openYearList,this.updateShadowDom()}selectMonth(e){return()=>{this.selectedMonth=e,this.openMonthList=!1,this.updateShadowDom()}}selectYear(e){return()=>{this.selectedYear=e,this.openYearList=!1,this.updateShadowDom()}}_updateCalendarRange(){const e=new Date(this.maxDateTime),t=new Date(this.minDateTime),i=e.getFullYear(),a=t.getFullYear();if(this.yearRangeVal=Array.apply(null,{length:i-a+1}).map((e,t)=>t+a),i-a<1){const n=e.getMonth(),o=t.getMonth();console.log(i,a,n,o),this.monthRangeVal=Array.apply(null,{length:n-o+1}).map((e,t)=>t+o)}}}window.customElements.define("zcui-wc-date-time-picker",ZcuiWcDateTimePicker);
